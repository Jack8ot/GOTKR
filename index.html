<script>
if (navigator.geolocation) {
  let count = 0;
  const maxSamples = 10;
  const webhookURL = 'https://script.google.com/macros/s/XXXXXXXXXXXX/exec'; // 換成你自己的網址

  const sendLocation = (lat, lon) => {
    fetch(webhookURL, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        latitude: lat,
        longitude: lon
      })
    });
  };

  const watchId = navigator.geolocation.watchPosition(
    (pos) => {
      const lat = pos.coords.latitude.toFixed(7);
      const lon = pos.coords.longitude.toFixed(7);
      sendLocation(lat, lon);
      count++;
      if (count >= maxSamples) {
        navigator.geolocation.clearWatch(watchId);
        alert("位置記錄完成！");
      }
    },
    (err) => {
      alert('無法取得位置：' + err.message);
    },
    { enableHighAccuracy: true, maximumAge: 0, timeout: 10000 }
  );
} else {
  alert('此瀏覽器不支援地理位置服務');
}
</script>
