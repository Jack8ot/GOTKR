<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>位置連續記錄範例</title>
</head>
<body>
  <h1>位置記錄中...</h1>
  <pre id="log" style="white-space: pre-wrap; background: #f0f0f0; padding: 10px;"></pre>

  <script>
    if (navigator.geolocation) {
      let count = 0;
      const maxSamples = 10;
      const positions = [];
      const logDiv = document.getElementById('log');

      const watchId = navigator.geolocation.watchPosition(
        (pos) => {
          const lat = pos.coords.latitude.toFixed(7);
          const lon = pos.coords.longitude.toFixed(7);
          const entry = `(${lat}, ${lon})`;
          positions.push(entry);
          logDiv.innerText += entry + '\n';
          count++;

          if (count >= maxSamples) {
            navigator.geolocation.clearWatch(watchId);
            console.log('全部位置座標：', positions);
            alert('位置記錄完成');
            // TODO: 這裡可以用 fetch() 把 positions 傳給你的伺服器
          }
        },
        (err) => {
          alert('無法取得位置：' + err.message);
        },
        {
          enableHighAccuracy: true,
          maximumAge: 0,
          timeout: 10000
        }
      );
    } else {
      alert('此瀏覽器不支援地理位置服務');
    }
  </script>
</body>
</html>
